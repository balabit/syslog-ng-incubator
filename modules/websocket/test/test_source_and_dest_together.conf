@version: 3.7
@include "scl.conf"
source      s_system { system(); internal();};

source ws_source {
    websocket(
        protocol("example-protocol")
        address("0.0.0.0")
        path("/")
        port(8000)
        # ssl(
        #     cert("/root/tmp/keys/server.crt")
        #     key("/root/tmp/keys/server.key")
        # )
    );
};


destination ws_server_des1 {
    websocket(
        mode("server")
        protocol("example-protocol")
        address("0.0.0.0")
        port(8001)
        template("$HOST $ISODATE $MSG")
        # ssl(
        #     cert("/root/tmp/keys/server.crt")
        #     key("/root/tmp/keys/server.key")
        # )
    );
};

destination ws_server_des2 {
    websocket(
        mode("server")
        protocol("example-protocol")
        address("0.0.0.0")
        port(8002)
        template("$HOST $ISODATE $MSG")
        # ssl(
        #     cert("/root/tmp/keys/server.crt")
        #     key("/root/tmp/keys/server.key")
        # )
    );
};

log { source(ws_source); destination(ws_server_des1); };
log { source(ws_source); destination(ws_server_des2); };
