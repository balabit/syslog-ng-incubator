@version: 3.7
@include "scl.conf"

# NOTICE!!!  There are some problems with this example. It's unable to listen on different ports in multithreads with libwebsocket.

source ws_source {
    websocket(
        protocol("example-protocol")
        address("0.0.0.0")
        path("/")
        port(8000)
        # ssl(
        #     cert("/root/tmp/keys/server.crt")
        #     key("/root/tmp/keys/server.key")
        # )
    );
};


destination ws_server_des {
    websocket(
        mode("server")
        protocol("example-protocol")
        address("0.0.0.0")
        port(8001)
        template("$HOST $ISODATE $MSG")
        # ssl(
        #     cert("/root/tmp/keys/server.crt")
        #     key("/root/tmp/keys/server.key")
        # )
    );
};

log { source(ws_source); destination(ws_server_des); };
